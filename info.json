{
  "author": "liangwei10@jd.com",
  "demo_url": "http://jdc.jd.com/demo/ambient_barrager/",
  "title": "弹幕效果",
  "github": "https://github.com/o2team-ambient/barrager",
  "demo_snippet": '<script type="text/javascript">!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={"i":r,"l":!1,"exports":{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{"configurable":!1,"enumerable":!0,"get":r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/",e(e.s=1)}([function(t,n){Object.defineProperty(n,"__esModule",{"value":!0});var e="BARRAGER",r=e.toLowerCase();n.O2_AMBIENT_MAIN="O2_AMBIENT_"+e+"_MAIN",n.O2_AMBIENT_INIT="O2_AMBIENT_"+e+"_INIT",n.O2_AMBIENT_CONFIG="O2_AMBIENT_"+e+"_CONFIG",n.O2_AMBIENT_CLASSNAME="o2_ambient_"+r},function(t,n,e){t.exports=e(2)},function(t,n,e){e(3),e(4),e(5)},function(t,n){},function(t,n,e){var r=e(0);window[r.O2_AMBIENT_CONFIG]={"allNum":200,"showNum":20,"opacity":1,"speed":60,"direction":"horizontal","easeType":"linear","width":1200,"contents":["京东超市吃货嘉年华","神券 517 减 300","5月12日到5月19日持续8天","食品全品类满 517 减 300","食品全品类满 517 减 200","食品全品类满 517 减 100","食品全品类满 517 减 50","食品全品类满 517 减 20","食品全品类满 517 减 5"]}},function(t,n,e){var r,i=e(6),a=(r=i)&&r.__esModule?r:{"default":r},u=e(0);var o=void 0;function s(){try{o&&(o.endBarrager(),o=null);var t=document.createElement("canvas");t.style="pointer-events: none; position:fixed; top:0; left:50%; transform: translateX(-50%); max-width: 100%; height: 300px; z-index: 1",t.id="barrager_canvas",document.body.appendChild(t);var n=window[u.O2_AMBIENT_CONFIG];(o=new a.default(t,n)).init(),window[u.O2_AMBIENT_MAIN]=o}catch(t){console.log(t)}}window[u.O2_AMBIENT_INIT]=s,s()},function(t,n,e){Object.defineProperty(n,"__esModule",{"value":!0});var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(7);var a=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.opts=e,this.itemData=[],this.canvas=n,this.context=n.getContext("2d"),this.moveFn={"linear":i.Tween.Linear,"easeIn":i.Tween.Quad.easeIn,"easeInOut":i.Tween.Quad.easeInOut,"easeOut":i.Tween.Quad.easeOut},this.itemNum=0,this.hasNum=0,this.randomKey=0,this.bindEvent()}return r(t,[{"key":"bindEvent","value":function(){return function(){var t=this;window.addEventListener("resize",function(){t.resetBarrager()})}}()},{"key":"init","value":function(){return function(){var t=this,n=this.opts,e=n.showNum,r=n.direction,i=n.width,a=document.documentElement.clientWidth,u=i;a<i&&(u=a);var o=u/2;this.canvas.style.width=u+"px",this.canvas.style.height=o+"px",this.width=this.canvas.width=u,this.height=this.canvas.height=o,this.allDistance="horizontal"===r?this.width:this.height;var s=function n(r){t.timer=setTimeout(function(){t.updateBarrager(),e>t.hasNum&&n(Math.floor(500*Math.random()))},r)};this.updateBarrager(),s(Math.floor(500*Math.random())),requestAnimationFrame(this.draw.bind(this))}}()},{"key":"updateBarrager","value":function(){return function(t){var n=this.opts,e=n.allNum,r=n.showNum,i=void 0;t?(i=this.itemData.filter(function(n){return n.key!==t.key}),this.hasNum--):i=this.itemData,e>this.itemNum&&r>this.hasNum&&i.push(this.generateItem()),e<=this.itemNum&&this.destroyBarrger(),this.itemData=i}}()},{"key":"generateItem","value":function(){return function(){var t=this.opts,n=t.opacity,e=t.speed,r=t.direction,i=t.easeType,a=t.contents,u=this.getRandomKey(),o=a[Math.floor(Math.random()*a.length)],s=Math.sqrt(o.length)/Math.sqrt(8)*e;this.width<720&&(s/=2);var c=o.length/8*150,h=Math.floor(Math.random()*this.width),f=Math.floor(Math.random()*this.height*.7);h-=h%16,f-=f%16;var l={"startTime":null,"x":"vertical"===r?h:0,"y":"horizontal"===r?f:0,"key":u,"opacity":n,"speed":s,"direction":r,"easeType":i,"allDistance":this.allDistance+2*c,"allTime":this.allDistance/s*1e3,"content":o,"offset":c,"destroy":this.updateBarrager.bind(this)};return this.itemNum++,this.hasNum++,l}}()},{"key":"getRandomKey","value":function(){return function(){return"o2h5-randow-"+Date.now()+"-"+this.randomKey++}}()},{"key":"drawItem","value":function(){return function(t,n){var e=t.easeType,r=t.allDistance,i=t.allTime,a=t.direction,u=t.opacity,o=t.offset;t.startTime||(t.startTime=n),t.lastTime||(t.lastTime=n);var s=n-t.lastTime;s>500&&(t.startTime=t.startTime+s);var c=n-t.startTime;if(c<i){var h=this.moveFn[e](c,0,r,i);this.context.fillStyle="rgba(255, 255, 255, "+u+")","horizontal"===a?t.x=r-h-o:t.y=r-h-o,this.context.fillText(t.content,t.x,t.y),t.lastTime=n}else t.destroy(t)}}()},{"key":"draw","value":function(){return function(t){var n=this;this.context.clearRect(0,0,this.width,this.height),this.context.font="14px 微软雅黑",this.context.textBaseline="top",this.itemData.forEach(function(e){n.drawItem(e,t)}),this.timer=requestAnimationFrame(this.draw.bind(this))}}()},{"key":"stopBarrager","value":function(){return function(){cancelAnimationFrame(this.timer)}}()},{"key":"palyBarrager","value":function(){return function(){this.timer=requestAnimationFrame(this.draw.bind(this))}}()},{"key":"endBarrager","value":function(){return function(){this.itemData=[],this.itemNum=0,this.hasNum=0,this.context.clearRect(0,0,this.width,this.height),cancelAnimationFrame(this.timer)}}()},{"key":"resetBarrager","value":function(){return function(t){this.opts=t||this.opts,this.endBarrager(),this.init()}}()},{"key":"destroyBarrger","value":function(){return function(){this.stopBarrager(),this.canvas.remove()}}()}]),t}();n.default=a},function(t,n){Object.defineProperty(n,"__esModule",{"value":!0}),n.getParameterByName=function(t,n){n||(n=window.location.href);t=t.replace(/[\[\]]/g,"\\$&");var e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(n);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null};var e=n.Tween={"Linear":function(){return function(t,n,e,r){return e*t/r+n}}(),"Quad":{"easeIn":function(){return function(t,n,e,r){return e*(t/=r)*t+n}}(),"easeOut":function(){return function(t,n,e,r){return-e*(t/=r)*(t-2)+n}}(),"easeInOut":function(){return function(t,n,e,r){return(t/=r/2)<1?e/2*t*t+n:-e/2*(--t*(t-2)-1)+n}}()},"Cubic":{"easeIn":function(){return function(t,n,e,r){return e*(t/=r)*t*t+n}}(),"easeOut":function(){return function(t,n,e,r){return e*((t=t/r-1)*t*t+1)+n}}(),"easeInOut":function(){return function(t,n,e,r){return(t/=r/2)<1?e/2*t*t*t+n:e/2*((t-=2)*t*t+2)+n}}()},"Quart":{"easeIn":function(){return function(t,n,e,r){return e*(t/=r)*t*t*t+n}}(),"easeOut":function(){return function(t,n,e,r){return-e*((t=t/r-1)*t*t*t-1)+n}}(),"easeInOut":function(){return function(t,n,e,r){return(t/=r/2)<1?e/2*t*t*t*t+n:-e/2*((t-=2)*t*t*t-2)+n}}()},"Quint":{"easeIn":function(){return function(t,n,e,r){return e*(t/=r)*t*t*t*t+n}}(),"easeOut":function(){return function(t,n,e,r){return e*((t=t/r-1)*t*t*t*t+1)+n}}(),"easeInOut":function(){return function(t,n,e,r){return(t/=r/2)<1?e/2*t*t*t*t*t+n:e/2*((t-=2)*t*t*t*t+2)+n}}()},"Sine":{"easeIn":function(){return function(t,n,e,r){return-e*Math.cos(t/r*(Math.PI/2))+e+n}}(),"easeOut":function(){return function(t,n,e,r){return e*Math.sin(t/r*(Math.PI/2))+n}}(),"easeInOut":function(){return function(t,n,e,r){return-e/2*(Math.cos(Math.PI*t/r)-1)+n}}()},"Expo":{"easeIn":function(){return function(t,n,e,r){return 0==t?n:e*Math.pow(2,10*(t/r-1))+n}}(),"easeOut":function(){return function(t,n,e,r){return t==r?n+e:e*(1-Math.pow(2,-10*t/r))+n}}(),"easeInOut":function(){return function(t,n,e,r){return 0==t?n:t==r?n+e:(t/=r/2)<1?e/2*Math.pow(2,10*(t-1))+n:e/2*(2-Math.pow(2,-10*--t))+n}}()},"Circ":{"easeIn":function(){return function(t,n,e,r){return-e*(Math.sqrt(1-(t/=r)*t)-1)+n}}(),"easeOut":function(){return function(t,n,e,r){return e*Math.sqrt(1-(t=t/r-1)*t)+n}}(),"easeInOut":function(){return function(t,n,e,r){return(t/=r/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+n:e/2*(Math.sqrt(1-(t-=2)*t)+1)+n}}()},"Elastic":{"easeIn":function(){return function(t,n,e,r,i,a){if(0==t)return n;if(1==(t/=r))return n+e;if(a||(a=.3*r),!i||i<Math.abs(e)){i=e;var u=a/4}else u=a/(2*Math.PI)*Math.asin(e/i);return-i*Math.pow(2,10*(t-=1))*Math.sin((t*r-u)*(2*Math.PI)/a)+n}}(),"easeOut":function(){return function(t,n,e,r,i,a){if(0==t)return n;if(1==(t/=r))return n+e;if(a||(a=.3*r),!i||i<Math.abs(e)){i=e;var u=a/4}else u=a/(2*Math.PI)*Math.asin(e/i);return i*Math.pow(2,-10*t)*Math.sin((t*r-u)*(2*Math.PI)/a)+e+n}}(),"easeInOut":function(){return function(t,n,e,r,i,a){if(0==t)return n;if(2==(t/=r/2))return n+e;if(a||(a=r*(.3*1.5)),!i||i<Math.abs(e)){i=e;var u=a/4}else u=a/(2*Math.PI)*Math.asin(e/i);return t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*r-u)*(2*Math.PI)/a)*-.5+n:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-u)*(2*Math.PI)/a)*.5+e+n}}()},"Back":{"easeIn":function(){return function(t,n,e,r,i){return void 0==i&&(i=1.70158),e*(t/=r)*t*((i+1)*t-i)+n}}(),"easeOut":function(){return function(t,n,e,r,i){return void 0==i&&(i=1.70158),e*((t=t/r-1)*t*((i+1)*t+i)+1)+n}}(),"easeInOut":function(){return function(t,n,e,r,i){return void 0==i&&(i=1.70158),(t/=r/2)<1?e/2*(t*t*((1+(i*=1.525))*t-i))+n:e/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+n}}()},"Bounce":{"easeIn":function(){return function(t,n,r,i){return r-e.Bounce.easeOut(i-t,0,r,i)+n}}(),"easeOut":function(){return function(t,n,e,r){return(t/=r)<1/2.75?e*(7.5625*t*t)+n:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+n:e*(7.5625*(t-=2.625/2.75)*t+.984375)+n}}(),"easeInOut":function(){return function(t,n,r,i){return t<i/2?.5*e.Bounce.easeIn(2*t,0,r,i)+n:.5*e.Bounce.easeOut(2*t-i,0,r,i)+.5*r+n}}()},"Pow8":{"easeOut":function(){return function(t,n,e,r){return e*((t=t/r-1)*t*t*t*t*t*t*t*t+1)+n}}()}}}]);</script>;
  "compatibility": ""
}
