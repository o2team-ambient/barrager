{"version":3,"file":"index.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/js/utils/const.js","../src/js/utils/raf.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../src/js/ambient.js","../src/js/utils/util.js","../src/js/barrager.js","../src/config.js","../src/rollup_index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","const id = 'barrager'\nconst ID = id.toUpperCase()\n\nexport const O2_AMBIENT_MAIN = `O2_AMBIENT_${ID}_MAIN`\nexport const O2_AMBIENT_INIT = `O2_AMBIENT_${ID}_INIT`\nexport const O2_AMBIENT_CONFIG = `O2_AMBIENT_${ID}_CONFIG`\nexport const O2_AMBIENT_CLASSNAME = `o2_ambient_${id}`\nexport const O2_AMBIENT_CONFIG_KEY = `O2_AMBIENT_CONFIG_KEY`\nexport const O2_AMBIENT_IS_CONFIG_RESET = 'O2_AMBIENT_IS_CONFIG_RESET'\n","// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\n\n// MIT license\n\n(function () {\n  let lastTime = 0\n  const vendors = ['ms', 'moz', 'webkit', 'o']\n  for (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[`${vendors[x]}RequestAnimationFrame`]\n    window.cancelAnimationFrame = window[`${vendors[x]}CancelAnimationFrame`]\n                                 || window[`${vendors[x]}CancelRequestAnimationFrame`]\n  }\n\n  if (!window.requestAnimationFrame) {\n    window.requestAnimationFrame = function (callback, element) {\n      const currTime = new Date().getTime()\n      const timeToCall = Math.max(0, 16 - (currTime - lastTime))\n      const id = window.setTimeout(function () { callback(currTime + timeToCall) },\n        timeToCall)\n      lastTime = currTime + timeToCall\n      return id\n    }\n  }\n\n  if (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function (id) {\n      clearTimeout(id)\n    }\n  }\n}())\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","import './utils/raf'\nimport {\n  O2_AMBIENT_MAIN,\n  O2_AMBIENT_INIT,\n  O2_AMBIENT_CONFIG\n} from './utils/const'\nimport Barrager from './barrager'\n\nlet wrapper = document.querySelector('.o2team_ambient_main')\nif (!wrapper) {\n  wrapper = document.createElement('div')\n  wrapper.setAttribute('class', 'o2team_ambient_main')\n  wrapper.setAttribute('id', 'o2team_ambient_main')\n  const inner = document.createElement('canvas')\n  inner.setAttribute('class', 'canvas_wp')\n  inner.setAttribute('id', 'barrager_canvas_wp')\n  inner.setAttribute('style', 'display: block; margin: 0 auto;')\n  wrapper.insertAdjacentElement('beforeend', inner)\n  document.body.insertAdjacentElement('beforeend', wrapper)\n}\nwrapper.addEventListener('click', () => {\n  wrapper.style.display = 'none'\n})\n\nlet barrager\n\n// 初始化函数\nexport default function initAmbient () {\n  try {\n    if (barrager) {\n      barrager.endBarrager()\n      barrager = null\n    }\n    const canvas = document.getElementById('barrager_canvas_wp')\n    const opts = window[O2_AMBIENT_CONFIG]\n    barrager = new Barrager(canvas, opts)\n    barrager.init()\n    window[O2_AMBIENT_MAIN] = barrager\n  } catch (err) {\n    console.log(err)\n  }\n}\n\n// 初始化函数\nwindow[O2_AMBIENT_INIT] = initAmbient\n","// t: current time（当前时间）\n// b: beginning value（初始值）\n// c: change in value（变化量）\n// d: duration（持续时间）\n\nconst Tween = {\n  Linear: function (t, b, c, d) {\n    return c * t / d + b;\n  },\n  Quad: {\n    easeIn: function (t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n    easeOut: function (t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n    easeInOut: function (t, b, c, d) {\n      if ((t /= d / 2) < 1) return c / 2 * t * t + b;\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    }\n  },\n  Cubic: {\n    easeIn: function (t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n    easeOut: function (t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t + 1) + b;\n    },\n    easeInOut: function (t, b, c, d) {\n      if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\n      return c / 2 * ((t -= 2) * t * t + 2) + b;\n    }\n  },\n  Quart: {\n    easeIn: function (t, b, c, d) {\n      return c * (t /= d) * t * t * t + b;\n    },\n    easeOut: function (t, b, c, d) {\n      return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n    },\n    easeInOut: function (t, b, c, d) {\n      if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\n      return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n    }\n  },\n  Quint: {\n    easeIn: function (t, b, c, d) {\n      return c * (t /= d) * t * t * t * t + b;\n    },\n    easeOut: function (t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    easeInOut: function (t, b, c, d) {\n      if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;\n      return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n    }\n  },\n  Sine: {\n    easeIn: function (t, b, c, d) {\n      return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n    },\n    easeOut: function (t, b, c, d) {\n      return c * Math.sin(t / d * (Math.PI / 2)) + b;\n    },\n    easeInOut: function (t, b, c, d) {\n      return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n    }\n  },\n  Expo: {\n    easeIn: function (t, b, c, d) {\n      return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n    },\n    easeOut: function (t, b, c, d) {\n      return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n    },\n    easeInOut: function (t, b, c, d) {\n      if (t == 0) return b;\n      if (t == d) return b + c;\n      if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n      return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n    }\n  },\n  Circ: {\n    easeIn: function (t, b, c, d) {\n      return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n    },\n    easeOut: function (t, b, c, d) {\n      return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n    },\n    easeInOut: function (t, b, c, d) {\n      if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n      return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n    }\n  },\n  Elastic: {\n    easeIn: function (t, b, c, d, a, p) {\n      if (t == 0) return b; if ((t /= d) == 1) return b + c; if (!p) p = d * .3;\n      if (!a || a < Math.abs(c)) { a = c; var s = p / 4; }\n      else var s = p / (2 * Math.PI) * Math.asin(c / a);\n      return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    },\n    easeOut: function (t, b, c, d, a, p) {\n      if (t == 0) return b; if ((t /= d) == 1) return b + c; if (!p) p = d * .3;\n      if (!a || a < Math.abs(c)) { a = c; var s = p / 4; }\n      else var s = p / (2 * Math.PI) * Math.asin(c / a);\n      return (a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b);\n    },\n    easeInOut: function (t, b, c, d, a, p) {\n      if (t == 0) return b; if ((t /= d / 2) == 2) return b + c; if (!p) p = d * (.3 * 1.5);\n      if (!a || a < Math.abs(c)) { a = c; var s = p / 4; }\n      else var s = p / (2 * Math.PI) * Math.asin(c / a);\n      if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n      return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;\n    }\n  },\n  Back: {\n    easeIn: function (t, b, c, d, s) {\n      if (s == undefined) s = 1.70158;\n      return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    easeOut: function (t, b, c, d, s) {\n      if (s == undefined) s = 1.70158;\n      return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    easeInOut: function (t, b, c, d, s) {\n      if (s == undefined) s = 1.70158;\n      if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\n      return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\n    }\n  },\n  Bounce: {\n    easeIn: function (t, b, c, d) {\n      return c - Tween.Bounce.easeOut(d - t, 0, c, d) + b;\n    },\n    easeOut: function (t, b, c, d) {\n      if ((t /= d) < (1 / 2.75)) {\n        return c * (7.5625 * t * t) + b;\n      } else if (t < (2 / 2.75)) {\n        return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;\n      } else if (t < (2.5 / 2.75)) {\n        return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;\n      } else {\n        return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;\n      }\n    },\n    easeInOut: function (t, b, c, d) {\n      if (t < d / 2) return Tween.Bounce.easeIn(t * 2, 0, c, d) * .5 + b;\n      else return Tween.Bounce.easeOut(t * 2 - d, 0, c, d) * .5 + c * .5 + b;\n    }\n  },\n\n  //----------\n\n  Pow8: {\n    easeOut: function (t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t * t * t * t * t * t * t + 1) + b\n    },\n  },\n}\n\nfunction getRandom (min, max) {\n  return (Math.random() * (max - min)) + min\n}\n\nfunction getRandomInt (min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nfunction getParameterByName (name, url) {\n  if (!url) url = window.location.href\n  /* eslint-disable no-useless-escape */\n  name = name.replace(/[\\[\\]]/g, '\\\\$&')\n  const regex = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`)\n  const results = regex.exec(url)\n  if (!results) return null\n  if (!results[2]) return ''\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n\nfunction getDevicePixelRatio () {\n  let result = 1\n  if (window.devicePixelRatio) {\n    result = window.devicePixelRatio >= 2 ? 2 : 1\n  }\n  return result\n}\n\nfunction degToRad (deg) {\n  return (Math.PI / 180) * deg\n}\n\nfunction radToDeg (rad) {\n  return (180 / Math.PI) * rad\n}\n\nexport {\n  Tween,\n  getRandom,\n  getRandomInt,\n  getParameterByName,\n  getDevicePixelRatio,\n  degToRad,\n  radToDeg\n}\n","import { Tween } from './utils/util'\n\nclass BarragerCanvas {\n  constructor (canvas, opts) {\n    this.opts = opts\n    this.itemData = []\n    this.canvas = canvas\n    this.context = canvas.getContext('2d')\n    this.visibleState = 'visible'\n    this.moveFn = {\n      linear: Tween.Linear,\n      easeIn: Tween.Quad.easeIn,\n      easeInOut: Tween.Quad.easeInOut,\n      easeOut: Tween.Quad.easeOut\n    }\n    // 总弹幕数\n    this.itemNum = 0\n    // 当前显示的弹幕数\n    this.hasNum = 0\n\n    this.randomKey = 0\n\n    this.bindEvent()\n  }\n\n  bindEvent () {\n    window.addEventListener('resize', this.reset)\n    document.addEventListener('visibilitychange', this.toggleBarrager)\n  }\n\n  init () {\n    let { showNum, direction, width, height } = this.opts\n    let realWidth = document.documentElement.clientWidth\n    let realHeight = document.documentElement.clientHeight\n    let canvasWidth = width\n    let canvasHeight = height\n    if (realWidth < width) {\n      canvasWidth = realWidth\n    }\n    if (realHeight < height) {\n      canvasHeight = realHeight\n    }\n    this.canvas.style.width = `${canvasWidth}px`\n    this.canvas.style.height = `${canvasHeight}px`\n    this.width = this.canvas.width = canvasWidth\n    this.height = this.canvas.height = canvasHeight\n    this.allDistance = direction === 'horizontal' ? this.width : this.height\n\n    // 定时随机生成弹幕\n    const timeFn = (timeGap) => {\n      this.timer = setTimeout(() => {\n        this.updateBarrager()\n        showNum > this.hasNum && timeFn(Math.floor(Math.random() * 1000) + 500)\n      }, timeGap)\n    }\n\n    this.updateBarrager()\n    timeFn(Math.floor(Math.random() * 500))\n\n    requestAnimationFrame(this.draw.bind(this))\n  }\n\n  updateBarrager (removeItem) {\n    const { allNum, showNum } = this.opts\n    let newItemData\n\n    // 是否有要移除的Item\n    if (removeItem) {\n      newItemData = this.itemData.filter(nItem => nItem.key !== removeItem.key)\n      this.hasNum--\n    } else {\n      newItemData = this.itemData\n    }\n    // 表示所有弹幕显示完毕或者 当前显示的弹幕数超过了限制值\n    if (allNum > this.itemNum && showNum > this.hasNum) {\n      newItemData.push(this.generateItem())\n    }\n    if (allNum <= this.itemNum) {\n      this.destroyBarrger()\n    }\n\n    this.itemData = newItemData\n  }\n\n  generateItem () {\n    const { opacity, speed, direction, easeType, contents } = this.opts\n    const key = this.getRandomKey()\n    const baseLong = 8\n    const randomIdx = Math.floor(Math.random() * contents.length)\n    const content = contents[randomIdx]\n    let realSpeed = Math.sqrt(content.length) / Math.sqrt(baseLong) * speed\n    if (this.width < 720) realSpeed = realSpeed / 2\n    const offset = content.length / baseLong * 150\n    let randomX = Math.floor((Math.random()) * this.width)\n    let randomY = Math.floor((Math.random()) * this.height * 0.9)\n    randomX = randomX - randomX % 16\n    randomY = randomY - randomY % 16\n    const props = {\n      startTime: null,\n      x: direction === 'vertical' ? randomX : 0,\n      y: direction === 'horizontal' ? randomY : 0,\n      key,\n      opacity,\n      speed: realSpeed,\n      direction,\n      easeType,\n      allDistance: this.allDistance + offset * 2,\n      allTime: this.allDistance / realSpeed * 1000,\n      content,\n      offset,\n      destroy: this.updateBarrager.bind(this)\n    }\n\n    this.itemNum++\n    this.hasNum++\n    return props\n  }\n\n  getRandomKey () {\n    return `o2h5-randow-${Date.now()}-${this.randomKey++}`\n  }\n\n  drawItem (item, timestamp) {\n    const { easeType, allDistance, allTime, direction, opacity, offset } = item\n    if (!item.startTime) item.startTime = timestamp\n    if (!item.lastTime) item.lastTime = timestamp\n    // 记录间隔是否过长，是则认为是进入了后台，暂停等，需要更新开始时间\n    let lastGap = timestamp - item.lastTime\n    if (lastGap > 500) {\n      item.startTime = item.startTime + lastGap\n    }\n    let timeGap = timestamp - item.startTime\n    if (timeGap < allTime) {\n      let moveDis = this.moveFn[easeType](timeGap, 0, allDistance, allTime)\n      this.context.fillStyle = `rgba(255, 255, 255, ${opacity})`\n      if (direction === 'horizontal') {\n        item.x = allDistance - moveDis - offset\n      } else {\n        item.y = allDistance - moveDis - offset\n      }\n      this.context.fillText(item.content, item.x, item.y)\n      item.lastTime = timestamp\n    } else {\n      item.destroy(item)\n    }\n  }\n\n  draw (timestamp) {\n    const { fontSize } = this.opts\n    this.context.clearRect(0, 0, this.width, this.height)\n    this.context.font = `${fontSize}px 微软雅黑`\n    this.context.textBaseline = 'top'\n    this.itemData.forEach((item) => {\n      this.drawItem(item, timestamp)\n    })\n\n    this.timer = requestAnimationFrame(this.draw.bind(this))\n  }\n\n  stopBarrager () {\n    cancelAnimationFrame(this.timer)\n    this.timer = null\n  }\n\n  playBarrager () {\n    this.timer = requestAnimationFrame(this.draw.bind(this))\n  }\n\n  toggleBarrager = () => {\n    if (this.visibleState === 'visible') {\n      this.visibleState = 'invisible'\n      this.stopBarrager()\n    } else {\n      this.visibleState = 'visible'\n      this.playBarrager()\n    }\n  }\n\n  endBarrager () {\n    this.itemData = []\n    this.itemNum = 0\n    this.hasNum = 0\n    this.context.clearRect(0, 0, this.width, this.height)\n    cancelAnimationFrame(this.timer)\n  }\n\n  reset = (opts) => {\n    this.opts = opts || this.opts\n    this.endBarrager()\n    this.init()\n  }\n\n  destroyBarrger () {\n    this.stopBarrager()\n    this.canvas.remove()\n  }\n}\n\nexport default BarragerCanvas\n","import { O2_AMBIENT_CONFIG } from './js/utils/const'\nwindow[O2_AMBIENT_CONFIG] = {\n  allNum: 200, // 弹幕总数量\n  showNum: 40, // 一屏最多显示的弹幕数量\n  opacity: 1,\n  speed: 60,\n  direction: 'horizontal',\n  easeType: 'linear',\n  width: 1960,\n  height: 1200,\n  fontSize: 14,\n  contents: ['京东超市吃货嘉年华', '神券 517 减 300', '5月12日到5月19日持续8天', '食品全品类满 517 减 300', '食品全品类满 517 减 200', '食品全品类满 517 减 100', '食品全品类满 517 减 50', '食品全品类满 517 减 20', '食品全品类满 517 减 5']\n}\n","import './css/package.scss'\n\nimport { O2_AMBIENT_CONFIG } from './js/utils/const'\nimport initAmbient from './js/ambient'\nimport './config'\n\nexport default function (opts) {\n  opts && Object.keys(window[O2_AMBIENT_CONFIG]).forEach(key => {\n    if (typeof opts[key] === 'undefined') return\n    window[O2_AMBIENT_CONFIG][key] = opts[key]\n  })\n\n  initAmbient()\n}\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","ID","toUpperCase","O2_AMBIENT_MAIN","O2_AMBIENT_INIT","O2_AMBIENT_CONFIG","lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","instance","Constructor","TypeError","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","barrager","obj","value","Tween","Linear","t","b","c","d","Quad","easeIn","easeOut","easeInOut","Cubic","Quart","Quint","Sine","cos","PI","sin","Expo","pow","Circ","sqrt","Elastic","a","p","abs","s","asin","Back","undefined","Bounce","Pow8","BarragerCanvas","canvas","opts","_this","visibleState","stopBarrager","playBarrager","endBarrager","init","itemData","context","getContext","moveFn","linear","itemNum","hasNum","randomKey","bindEvent","addEventListener","this","reset","toggleBarrager","showNum","direction","width","height","realWidth","documentElement","clientWidth","realHeight","clientHeight","canvasWidth","canvasHeight","allDistance","updateBarrager","timeFn","timeGap","_this2","timer","floor","random","draw","bind","removeItem","newItemData","allNum","filter","nItem","push","generateItem","destroyBarrger","opacity","speed","easeType","contents","getRandomKey","content","realSpeed","offset","randomX","randomY","startTime","y","allTime","destroy","now","item","timestamp","lastGap","moveDis","fillStyle","fillText","fontSize","clearRect","font","textBaseline","forEach","_this3","drawItem","remove","wrapper","querySelector","setAttribute","inner","insertAdjacentElement","body","initAmbient","getElementById","Barrager","err","console","log","display","keys"],"mappings":"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"}